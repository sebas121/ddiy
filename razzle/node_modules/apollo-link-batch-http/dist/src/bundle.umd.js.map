{"version":3,"file":"bundle.umd.js","sources":["batchHttpLink.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar apollo_link_core_1 = require(\"apollo-link-core\");\nvar apollo_fetch_1 = require(\"apollo-fetch\");\nvar apollo_link_batch_1 = require(\"apollo-link-batch\");\nvar printer_1 = require(\"graphql/language/printer\");\nvar BatchHttpLink = (function (_super) {\n    __extends(BatchHttpLink, _super);\n    function BatchHttpLink(fetchParams) {\n        var _this = _super.call(this) || this;\n        _this.headers = {};\n        _this.batchInterval = (fetchParams && fetchParams.batchInterval) || 10;\n        _this.batchMax = (fetchParams && fetchParams.batchMax) || 10;\n        _this.apolloFetch =\n            (fetchParams && fetchParams.fetch) ||\n                apollo_fetch_1.createApolloFetch({ uri: fetchParams && fetchParams.uri });\n        _this.apolloFetch.batchUse(function (request, next) {\n            request.options.headers = __assign({}, request.options.headers, _this.headers);\n            next();\n        });\n        var batchHandler = function (operations) {\n            return new apollo_link_core_1.Observable(function (observer) {\n                var printedOperations = operations.map(function (operation) { return (__assign({}, operation, { query: printer_1.print(operation.query) })); });\n                _this.apolloFetch(printedOperations)\n                    .then(function (data) {\n                    observer.next(data);\n                    observer.complete();\n                })\n                    .catch(observer.error.bind(observer));\n            });\n        };\n        _this.batcher = new apollo_link_batch_1.default({\n            batchInterval: _this.batchInterval,\n            batchMax: _this.batchMax,\n            batchHandler: batchHandler,\n        });\n        return _this;\n    }\n    BatchHttpLink.prototype.request = function (operation) {\n        return this.batcher.request(operation);\n    };\n    return BatchHttpLink;\n}(apollo_link_core_1.ApolloLink));\nexports.default = BatchHttpLink;\n//# sourceMappingURL=batchHttpLink.js.map"],"names":["this"],"mappings":"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"}